<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script type="text/javascript" src="http://d3js.org/d3.v5.min.js"></script> -->
    <script type="text/javascript" src="../d3.min.js"></script>
    <title>Document</title>
</head>
<body>
    <svg></svg>
    <script>

        const svg = d3.select('svg')
            .attr('width',600)
            .attr('height',600);
        const g = svg.append('g');
            
        const dataset = [10,20,30,23,13,40,27,35,20];
        
        const xScale = d3.scaleBand()
            .domain(d3.range(dataset.length))
            .range([0,500]);
        const yScale=d3.scaleLinear()
            .domain([0,d3.max(dataset)])
            .range([300,0]);

        const xAxis=d3.axisBottom(xScale);
        const yAxis=d3.axisLeft(yScale);
        
        
        g.append('g')
            .attr('transform','translate(100,350)')
            .call(xAxis);
        g.append('g')
            .attr('transform','translate(100,50)')
            .call(yAxis);
        
        // line 生成器。
        const line = d3.line()
            .x(function(d,i){
                return xScale(i)+100+30;
            })
            .y(function(d,i){
                return yScale(d)+50;
            }).curve(d3.curveCatmullRom.alpha(0.5));
        
        g.append('path')
            .attr('d',line(dataset))
            .attr('stroke','black')
            .attr('fill','none');
        
        g.append('g')
            .selectAll('circle')
            .data(dataset)
            .enter()
            .append('circle')
            .attr('cx', function(d,i) {
                return xScale(i)+100+30;
        })
        .attr('cy',function(d,i){
            return yScale(d)+50;
        })
        .attr('r',5).attr('fill','blue')
        
        g.append('g')
            .selectAll('text')
            .data(dataset)
            .enter()
            .append('text')
            .attr('x',function(d,i){
                 return xScale(i)+100+18;
            })
        .attr('y',function(d,i){
            return yScale(d)+40;
        })
        .text(function(d,i){
            return d;
        })

        
    </script>
    
</body>
</html>